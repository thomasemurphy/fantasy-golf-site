<% content_for :title, "Standings â€” The Feeley Tour Cup" %>

<h1 class="mb-4">Standings</h1>

<ul class="nav nav-pills mb-3" role="tablist">
  <%= link_to "Overall",     standings_path(tab: "overall"),     class: "nav-link #{'active' if @tab == 'overall'}" %>
  <%= link_to "Majors",      standings_path(tab: "majors"),      class: "nav-link #{'active' if @tab == 'majors'}" %>
  <%= link_to "Side Events", standings_path(tab: "side_events"), class: "nav-link #{'active' if @tab == 'side_events'}" %>
  <%= link_to "1st Half",    standings_path(tab: "first_half"),  class: "nav-link #{'active' if @tab == 'first_half'}" %>
  <%= link_to "2nd Half",    standings_path(tab: "second_half"), class: "nav-link #{'active' if @tab == 'second_half'}" %>
</ul>

<div class="card mb-4">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover standings-table mb-0">
        <thead class="table-light">
          <tr>
            <th>Rank</th>
            <th>Player</th>
            <th>Earnings</th>
          </tr>
        </thead>
        <tbody>
          <% @standings.each do |row| %>
            <tr class="<%= 'highlight' if row[:user] == current_user %>">
              <td><%= row[:rank] %></td>
              <td><%= row[:user].name %></td>
              <td>$<%= number_with_delimiter((row[:earnings_cents] / 100.0).to_i) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<% if @no_cut_users.any? %>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">No-Cut Challenge â€” Still Alive ğŸ†</h5>
      <ul class="list-unstyled mb-0">
        <% @no_cut_users.each do |user| %>
          <li><%= user.name %></li>
        <% end %>
      </ul>
    </div>
  </div>
<% end %>
